services:
  # Web service configuration
  - type: web
    name: student-management-backend
    env: docker
    region: oregon # Change to your preferred region
    plan: free # Change to a paid plan for production
    branch: main # Change to your default branch name
    
    # Build configuration
    dockerfilePath: ./Dockerfile
    
    # Environment variables
    envVars:
      - key: SPRING_DATASOURCE_URL
        sync: false # Set this manually in Render dashboard
      - key: SPRING_DATASOURCE_USERNAME
        sync: false
      - key: SPRING_DATASOURCE_PASSWORD
        sync: false
      - key: JWT_SECRET
        generateValue: true # Render will generate a random secret
      - key: JWT_EXPIRATION
        value: 86400000
      - key: SPRING_JPA_DDL_AUTO
        value: update
      - key: SPRING_JPA_SHOW_SQL
        value: false # Disable SQL logging in production
    
    # Health check configuration
    healthCheckPath: /actuator/health
    
    # Auto-deploy configuration
    autoDeploy: true
